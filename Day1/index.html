<html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>JS Drum Kit</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://fav.farm/ðŸ”¥" />
</head>

<body>
    <div class="keys"></div>

    <script>
        // Single source of truth for all key mappings
        const DRUM_KEYS = [
            { keyCode: 65, key: 'A', sound: 'clap' },
            { keyCode: 83, key: 'S', sound: 'hihat' },
            { keyCode: 68, key: 'D', sound: 'kick' },
            { keyCode: 70, key: 'F', sound: 'openhat' },
            { keyCode: 71, key: 'G', sound: 'boom' },
            { keyCode: 72, key: 'H', sound: 'ride' },
            { keyCode: 74, key: 'J', sound: 'snare' },
            { keyCode: 75, key: 'K', sound: 'tom' },
            { keyCode: 76, key: 'L', sound: 'tink' }
        ];

        // Generate keys HTML
        const keysContainer = document.querySelector('.keys');
        DRUM_KEYS.forEach(drumKey => {
            const keyDiv = document.createElement('div');
            keyDiv.className = 'key';
            keyDiv.setAttribute('data-key', drumKey.keyCode);
            keyDiv.innerHTML = `<kbd>${drumKey.key}</kbd><span class="sound">${drumKey.sound}</span>`;
            keysContainer.appendChild(keyDiv);
        });

        // Generate audio elements
        DRUM_KEYS.forEach(drumKey => {
            const audio = document.createElement('audio');
            audio.setAttribute('data-key', drumKey.keyCode);
            audio.src = `sounds/${drumKey.sound}.wav`;
            document.body.appendChild(audio);
        });

        // Event listener for keydown
        window.addEventListener('keydown', function (e) {
            const drumKey = DRUM_KEYS.find(dk => dk.keyCode === e.keyCode);
            if (!drumKey) return;

            const audio = document.querySelector(`audio[data-key="${drumKey.keyCode}"]`);
            const key = document.querySelector(`div[data-key="${drumKey.keyCode}"]`);
            if (!audio) return;

            audio.currentTime = 0;
            audio.play();
            key.classList.add('playing');
            audio.addEventListener('ended', function () {
                key.classList.remove('playing');
            }, { once: true });
        })
    </script>
</body>

</html>

</html>